<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Grupos WhatsApp Gr√°tis - Link de Amizade, Zoeira e Namoro</title>
<style>
/* Reset e Estilos B√°sicos */
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Segoe UI',Roboto,Arial,sans-serif;color:#222;min-height:100vh;display:flex;flex-direction:column;align-items:center;background:#ebebeb}

/* Pop-up An√∫ncio */
#popup-anuncio{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:none;justify-content:center;align-items:center;z-index:9999}
#popup-content{position:relative;max-width:90%;width:350px;background:none;border-radius:15px;box-shadow:0 5px 20px rgba(0,0,0,0.5);overflow:hidden}
#popup-content img{width:100%;height:auto;display:block;border-radius:15px;cursor:pointer}
#close-popup-btn{position:absolute;top:10px;right:10px;background:#e74c3c;color:white;border:2px solid white;border-radius:50%;width:30px;height:30px;text-align:center;line-height:26px;font-size:18px;font-weight:bold;cursor:pointer;z-index:10}

/* Header */
header{position:fixed;top:0;left:0;width:100%;padding:12px 10px;background:#fff;color:#000;text-align:center;z-index:1000;box-shadow:0 2px 5px rgba(0,0,0,0.1);transform:translateY(0);transition:transform 0.3s ease-out}
header h1{font-size:28px;color:#00008b}
#categorias{margin-top:8px;display:flex;justify-content:center;gap:6px;flex-wrap:wrap}
.cat-btn{background:rgba(0,0,0,0.05);border:1px solid rgba(0,0,0,0.1);border-radius:20px;color:#000;font-size:13px;padding:5px 11px;cursor:pointer}
.cat-btn.active{background:#b78cff;color:#fff;border-color:#b78cff}

/* Menu */
.menu-icon{position:fixed;top:20px;right:20px;font-size:28px;z-index:1100;background:rgba(255,255,255,0.8);color:#000;padding:6px 12px;border-radius:10px;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,0.2)}
.menu{position:fixed;top:0;right:-300px;width:250px;height:100%;background:rgba(255,255,255,0.95);padding:30px 20px;transition:right .3s;z-index:1200;box-shadow:-2px 0 10px rgba(0,0,0,0.1)}
.menu.open{right:0}
.menu .close-btn{position:absolute;top:15px;right:20px;background:none;border:none;font-size:26px;cursor:pointer}
.menu a{display:block;text-decoration:none;color:#333!important;padding:12px;border-radius:12px;margin-top:15px;font-weight:600;box-shadow:0 2px 5px rgba(0,0,0,0.05)}

/* Cards dos Grupos */
#lista-grupos{width:100%;max-width:420px;padding:20px;display:flex;flex-direction:column;gap:22px}
.grupo{width:100%;background:#fff;border-radius:10px;overflow:hidden;display:flex;flex-direction:column;text-decoration:none;color:#333;box-shadow:0 4px 15px rgba(0,0,0,0.1);position:relative}
.card-topo{position:relative;width:100%;height:180px}
.grupo img.foto{width:100%;height:100%;object-fit:cover}
.badge-categoria{position:absolute;bottom:10px;left:10px;background:rgba(0,0,0,0.7);color:#fff;padding:3px 10px;font-size:11px;border-radius:3px;text-transform:uppercase}
.card-corpo{padding:15px}
.grupo span.nome{font-size:18px;font-weight:bold;display:block;margin-bottom:5px}
.descricao{font-size:13px;color:#666;margin-bottom:15px;line-height:1.4}
.btn-falso-entrar{background:#25d366;color:white;text-align:center;padding:12px;border-radius:5px;font-weight:bold;text-transform:uppercase}
.grupo.vip{border:2px solid #ffd700!important;animation:brilho 2s infinite alternate}
@keyframes brilho{from{box-shadow:0 0 8px rgba(255,215,0,0.4)}to{box-shadow:0 0 20px rgba(255,215,0,0.8)}}

/* Modais */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:none;justify-content:center;align-items:center;z-index:5000}
.modal-content{background:#fff;padding:25px;border-radius:20px;max-width:400px;width:90%;text-align:center;position:relative}
.modal-content input, .modal-content select{width:100%;margin:8px 0;padding:10px;border-radius:10px;border:1px solid #ccc}
.modal-content button{padding:12px;width:100%;margin-top:10px;border:none;border-radius:10px;background:#b78cff;color:#fff;cursor:pointer;font-weight:bold}
.whatsapp-btn{background:#25d366;display:block;text-decoration:none;color:#fff;padding:12px;border-radius:10px;margin-top:10px;font-weight:bold}
</style>
</head>
<body>

<div id="popup-anuncio">
    <div id="popup-content">
        <span id="close-popup-btn">X</span>
        <a href="https://br.shp.ee/5q1d37e?smtt=0.0.9" target="_blank"><img src="https://files.catbox.moe/xjuhw5.png"></a>
    </div>
</div>

<header id="mainHeader">
  <h1>Grupos WhatsApp</h1>
  <div id="categorias">
    <button class="cat-btn active" data-cat="Todos">Todos</button>
    <button class="cat-btn" data-cat="amizade">Amizade</button>
    <button class="cat-btn" data-cat="zoeira">Zoeira</button>
    <button class="cat-btn" data-cat="namoro">Namoro</button>
  </div>
</header>

<div class="menu-icon" id="menuBtn">‚ò∞</div> 
<div class="menu" id="sideMenu">
  <button class="close-btn" id="closeBtn">‚ùå</button>
  <h2 style="margin-top:40px">MENU</h2>
  <a href="#" id="enviarGrupo" style="background:#f0fff4;border:2px solid #2ecc71">üöÄ Enviar Grupo</a>
  <a href="#" id="meusGrupos" style="background:#fdf5e6;border:2px solid #f4a460">üìù Meus Grupos</a>
  <a href="#" id="comprarVipBtn" style="background:#fffdf0;border:2px solid #ffd700">‚≠ê Assinar VIP</a>
  <a href="https://wa.me/5521977231625" target="_blank" style="background:#f5fff9;border:2px solid #25d366">üü¢ Suporte</a>
</div>

<div style="flex-grow:1;width:100%;display:flex;flex-direction:column;align-items:center;padding-top:130px">
    <div id="lista-grupos"></div>
</div>

<footer style="padding:20px;text-align:center;color:#666">
    <a href="#" id="termosLink">Termos</a> | <a href="#" id="privacidadeLink">Privacidade</a><br>
    ¬© 2026 GruposWhats
</footer>

<div id="modalEnvioGrupo" class="modal">
  <div class="modal-content">
    <span onclick="this.parentElement.parentElement.style.display='none'" style="cursor:pointer;position:absolute;top:10px;right:15px">‚ùå</span>
    <h3>Enviar Grupo</h3>
    <input type="text" id="grupoNome" placeholder="Nome do grupo">
    <input type="text" id="grupoLink" placeholder="Link do WhatsApp">
    <input type="text" id="grupoDescricao" placeholder="Descri√ß√£o (M√°x 60 letras)" maxlength="60">
    <select id="grupoCategoria">
      <option value="">Selecione a Categoria</option>
      <option value="Amizade">Amizade</option>
      <option value="Zoeira">Zoeira</option>
      <option value="Namoro">Namoro</option>
    </select>
    <input type="text" id="grupoVipCodigo" placeholder="C√≥digo VIP (opcional)">
    <input type="file" id="grupoFotoUpload" accept="image/*">
    <img id="previewFoto" src="https://files.catbox.moe/9qdwuz.webp" style="width:60px;height:60px;border-radius:50%;margin:10px">
    <button id="salvarGrupoBtn">Enviar Agora</button>
  </div>
</div>

<div id="vipModal" class="modal">
  <div class="modal-content">
    <span onclick="document.getElementById('vipModal').style.display='none'" style="cursor:pointer;position:absolute;top:10px;right:15px">‚ùå</span>
    <h3>‚≠ê Ativar VIP ‚≠ê</h3>
    <p>Destaque seu grupo no topo!</p>
    <img src="https://files.catbox.moe/kvyq5d.jpg" style="width:80%;border-radius:10px;margin:10px 0">
    <button onclick="navigator.clipboard.writeText('00020126580014BR.GOV.BCB.PIX013689a5c070-cdd1-443b-997d-0cbbcf80e2de52040000530398654045.005802BR5918Elias da Conceicao6009SAO PAULO62140510lRM9nLzEht6304AA83');alert('Pix Copiado!')">üìã Copiar Pix R$ 5,00</button>
    <a href="https://wa.me/5521977231625" class="whatsapp-btn">Enviar Comprovante</a>
  </div>
</div>

<div id="customAlert" class="modal"><div class="modal-content"><p id="alertMsg"></p><button onclick="this.parentElement.parentElement.style.display='none'">OK</button></div></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, onValue, push, set, remove, runTransaction } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDsrYjO2yVTemKqwmJRzNjh5sfaMalPqhE",
  authDomain: "cliques-4a2c1.firebaseapp.com",
  databaseURL: "https://cliques-4a2c1-default-rtdb.firebaseio.com",
  projectId: "cliques-4a2c1",
  storageBucket: "cliques-4a2c1.appspot.com",
  messagingSenderId: "903875153255",
  appId: "1:903875153255:web:ff3cf25e059b10d665b3c2"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
let todosGrupos = [];

// Fun√ß√£o mostrar alerta
window.showAlert = (m) => { document.getElementById('alertMsg').textContent = m; document.getElementById('customAlert').style.display = 'flex'; };

// Carregar Grupos
function carregarGrupos() {
    onValue(ref(db, 'grupos'), (snap) => {
        todosGrupos = [];
        if(snap.exists()){
            snap.forEach(c => { 
                let g = c.val(); g.key = c.key; 
                todosGrupos.push(g); 
            });
        }
        renderizar('Todos');
    });
}

function renderizar(filtro) {
    const container = document.getElementById('lista-grupos');
    container.innerHTML = '';
    const usuario = localStorage.getItem('usuarioID');
    
    let lista = filtro === 'Todos' ? todosGrupos : todosGrupos.filter(g => g.categoria === filtro);
    
    // Ordenar: VIP primeiro
    lista.sort((a,b) => (b.vip ? 1 : 0) - (a.vip ? 1 : 0));

    lista.forEach(g => {
        const card = document.createElement('div');
        card.className = g.vip ? 'grupo vip' : 'grupo';
        card.innerHTML = `
            <div class="card-topo">
                <img src="${g.foto || 'https://files.catbox.moe/9qdwuz.webp'}" class="foto">
                <span class="badge-categoria">${g.categoria}</span>
            </div>
            <div class="card-corpo">
                <span class="nome">${g.nome}</span>
                <p class="descricao">${g.descricao}</p>
                <div class="btn-falso-entrar">Entrar no Grupo</div>
            </div>
        `;
        card.onclick = () => {
            runTransaction(ref(db, `grupos/${g.key}/cliques`), c => (c || 0) + 1);
            window.open(g.link, '_blank');
        };
        container.appendChild(card);
    });
}

// Eventos
document.getElementById('menuBtn').onclick = () => document.getElementById('sideMenu').classList.add('open');
document.getElementById('closeBtn').onclick = () => document.getElementById('sideMenu').classList.remove('open');
document.getElementById('enviarGrupo').onclick = () => { document.getElementById('modalEnvioGrupo').style.display='flex'; document.getElementById('sideMenu').classList.remove('open'); };
document.getElementById('comprarVipBtn').onclick = () => { document.getElementById('vipModal').style.display='flex'; document.getElementById('sideMenu').classList.remove('open'); };

// Salvar Grupo
document.getElementById('salvarGrupoBtn').onclick = async () => {
    const nome = document.getElementById('grupoNome').value;
    const link = document.getElementById('grupoLink').value;
    const desc = document.getElementById('grupoDescricao').value;
    const cat = document.getElementById('grupoCategoria').value;
    const vipCod = document.getElementById('grupoVipCodigo').value;

    if(!nome || !link || !cat) return showAlert('Preencha os campos obrigat√≥rios!');

    const novo = {
        nome, link, categoria: cat, 
        descricao: desc || "Grupo de WhatsApp",
        vip: vipCod === "21977",
        cliques: 0,
        dono: localStorage.getItem('usuarioID') || crypto.randomUUID(),
        foto: document.getElementById('previewFoto').src
    };
    
    localStorage.setItem('usuarioID', novo.dono);
    await push(ref(db, 'grupos'), novo);
    document.getElementById('modalEnvioGrupo').style.display='none';
    showAlert('Grupo enviado com sucesso!');
};

// Foto Preview
document.getElementById('grupoFotoUpload').onchange = (e) => {
    const reader = new FileReader();
    reader.onload = (ev) => document.getElementById('previewFoto').src = ev.target.result;
    reader.readAsDataURL(e.target.files[0]);
};

// Categorias
document.querySelectorAll('.cat-btn').forEach(b => {
    b.onclick = () => {
        document.querySelector('.cat-btn.active').classList.remove('active');
        b.classList.add('active');
        renderizar(b.dataset.cat);
    };
});

window.onload = () => {
    carregarGrupos();
    setTimeout(() => document.getElementById('popup-anuncio').style.display='flex', 1000);
};
document.getElementById('close-popup-btn').onclick = () => document.getElementById('popup-anuncio').style.display='none';
</script>
</body>
</html>
